<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title> foo | rich merwarth | richmerwarth.github.io </title>
    <link rel="shortcut icon" type="image/x-icon" href="https://richmerwarth.github.io/favicon.ico" />
    <meta property="og:site_name" content=" rich merwarth | richmerwarth.github.io " />
    <meta property="og:title" content=" rich merwarth | richmerwarth.github.io " />
    <meta property="og:url" content="https://richmerwarth.github.io/" />
    <meta property="og:type" content="website" />
    <meta itemprop="name" content=" rich merwarth | richmerwarth.github.io" />
    <meta itemprop="url" content="https://richmerwarth.github.io/" />
    <meta name="twitter:title" content=" rich merwarth | richmerwarth.github.io" />
    <meta name="twitter:url" content="https://richmerwarth.github.io/" />
    <meta name="twitter:card" content="summary" />
    <meta name="description" content="" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" href="css/base.css">
</head>

<body>
    <script src="js/three.js"></script>
    <script src="js/loaders/STLLoader.js"></script>
    <script src="GSAP_src/minified/TweenMax.min.js"></script>
    <script src="GSAP_src/minified/plugins/ColorPropsPlugin.min.js"></script>



    <script>
        // Establish basics:

        var coral = 0xd15145;
        var yellow = 0xf0bc4d;
        var mint = 0xa3cfbd;
        var offwhite = 0xf7f7f2;
        var black = 0x26201e;
        var realblack = 0x000000;

        var _coral = '#d15145';
        var _yellow = '#f0bc4d';
        var _mint = '#a3cfbd';
        var _offwhite = '#f7f7f2';
        var _black = '#26201e';

        var colors = new Array(offwhite, coral, yellow, mint, black);

        var bgcolor = yellow;




        var numSprites = 40;

        var scene = new THREE.Scene();
        scene.background = new THREE.Color(bgcolor);

        // scene.fog = new THREE.Fog(bgcolor, 20, 70);

        var world = new THREE.Object3D;
        world.name = "world";
        scene.add(world);


        var numeral = new THREE.Object3D;
        numeral.name = "numeral";
        scene.add(numeral);

        ////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////

        var camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.x = 0;
        camera.position.y = 300;
        camera.position.z = 0;

        camera.lookAt(world.position);

        var renderer = new THREE.WebGLRenderer({
            antialias: true,
            alpha: false
        });

        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        ////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////
        ////////////////////////////////////////////////////////


        function init() {
            console.log("init()");

            addLight();

            // initTweens();
        }

        function recolor(target) {
            target.material.color.set(target.currentColor);
        }


        ///////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////


        var loader = new THREE.STLLoader();
        loader.load('obj/crystals/crystal_01b.stl', function (geometry) {

            geometry.computeFaceNormals();

            for (var i = 0; i < numSprites; i++) {

                var myColor = colors[Math.floor(Math.random() * colors.length)];
                var material = new THREE.MeshPhongMaterial({
                    color: yellow,
                    specular: offwhite,
                    shininess: 90,
                    flatShading: true,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.75,
                    wireframe: false
                });


                var holder = new THREE.Object3D();
                holder.name = "holder" + i;

                var theta = Math.PI * 2 / numSprites;
                

                var theta_x = 0;

                var theta_x = Math.random() * 1;
                var theta_y = Math.random() * (Math.PI * 2);
                var theta_z = Math.random() * (Math.PI * 2);



                holder.rotation.set(theta_x, theta * i, 0);
                // holder.rotation.set(theta_x, theta_y, theta_z);
                world.add(holder);


                var mesh = new THREE.Mesh(geometry, material);

                var thickness = 0.2 + Math.random() * 0.5;
                // var thickness = 0.33;
                var length = 1.33 + Math.random() * 1.5;
                // var length = 0.66;

                // var radius = Math.random() * 25 + 25;
                // var radius = length * 0.66 * 100;
                var radius = 5;

                mesh.position.set(radius, 0, 0);
                mesh.rotation.x = theta_x;

                mesh.scale.set(length, thickness, thickness);

                mesh.castShadow = false;
                mesh.receiveShadow = false;

                mesh.name = "arrow";
                mesh.spinSpeed = 0.01 + Math.random() / 30;

                holder.add(mesh);

            }

        });


        var loader2 = new THREE.STLLoader();
        loader2.load('obj/crystals/big8.stl', function (geometry2) {

            geometry2.computeFaceNormals();

            console.log("ocho");

            var material2 = new THREE.MeshPhongMaterial({
                color: coral,
                specular: offwhite,
                shininess: 40,
                flatShading: true,
                // side: THREE.DoubleSide,
                transparent: true,
                opacity: 1.0,
                wireframe: false
            });

            var mesh2 = new THREE.Mesh(geometry2, material2);

            mesh2.rotation.y = Math.PI;

            // var radius = Math.random() * 25 + 25;
            var radius = 250;

            mesh2.position.set(0, radius, 0);

            mesh2.scale.set(1, 1, 1);

            mesh2.castShadow = false;
            mesh2.receiveShadow = false;

            mesh2.name = "ocho";

            numeral.add(mesh2);

        });


        ///////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////


        function addLight() {

            point1 = new THREE.PointLight(0xffffff, 1.0, 0);

            point1.position.set(0, 400, -200);

            point1.castShadow = false;

            scene.add(point1);

            ////////

            point2 = new THREE.PointLight(yellow, 0.5, 0);

            point2.position.set(200, 100, -150);

            scene.add(point2);


            ////////

            point3 = new THREE.PointLight(mint, 0.5, 0);

            point3.position.set(-200, -100, 0);

            scene.add(point3);


            ////////

            // point4 = new THREE.PointLight(mint, 1, 0);

            // point4.position.set(-100, -100, -50);

            // scene.add(point4);

        }






        // animate:
        function animate() {
            requestAnimationFrame(animate);

            // world.rotation.z -= 0.005;

            world.rotation.y -= 0.003;
            // world.rotation.x -= 0.002;
            // world.rotation.z -= 0.003;
            // world.rotation.x += 0.003;

            numeral.rotation.z += 0.01;

            for (i in world.children) {
                var holder = world.children[i];

                // holder.rotation.x += holder.rot_x;
                // holder.rotation.y += holder.rot_y;
                // holder.rotation.z += holder.rot_z;


                for (n in holder.children) {
                    holder.children[n].rotation.x -= holder.children[n].spinSpeed;
                }
            }

            renderer.render(scene, camera);
        }



        init();
        animate();
    </script>
</body>

</html>